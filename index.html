<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Pembagian Hasil Panen</title>
<style>
* {
  box-sizing: border-box;
}

body {
  font-family: Arial, sans-serif;
  background: #f4f6fb;
  padding: 20px;
}

.container {
  max-width: 720px;
  margin: auto;
  background: #ffffff;
  padding: 24px;
  border-radius: 12px;
}

h2 {
  text-align: center;
  margin-bottom: 20px;
}

.grade {
  background: #eef3ff;
  padding: 16px;
  border-radius: 10px;
  margin-bottom: 16px;
}

.grade h3 {
  margin: 0 0 12px 0;
}

.row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
}

label {
  font-size: 13px;
  margin-bottom: 4px;
  display: block;
}

input {
  width: 100%;
  padding: 10px;
  border-radius: 6px;
  border: 1px solid #ccc;
  font-size: 14px;
}

.alt {
  background: #f3f3f3;
}

button {
  width: 100%;
  padding: 14px;
  margin-top: 10px;
  background: #4CAF50;
  color: #fff;
  border: none;
  border-radius: 8px;
  font-size: 16px;
  cursor: pointer;
}

.summary {
  background: #fff3cd;
  padding: 14px;
  border-radius: 10px;
  margin: 20px 0;
}

.person {
  background: #e9f9ee;
  padding: 14px;
  border-radius: 10px;
  margin-bottom: 12px;
}

.person-amount {
  text-align: center;
  font-size: 20px;
  font-weight: bold;
  margin-top: 6px;
}

.small {
  font-size: 12px;
  color: #555;
  text-align: center;
}

@media(max-width:600px){
  .row {
    grid-template-columns: 1fr;
  }
}
</style>
</head>

<body>
<div class="container">
<h2>Pembagian Hasil Panen Delis Banana</h2>

<div class="grade">
<h3>Grade A</h3>
<div class="row">
  <div>
    <label>Jumlah (Kg)</label>
    <input type="number" id="kgA">
  </div>
  <div>
    <label>Harga per Kg</label>
    <input type="text" id="hargaA" oninput="formatInput(this)">
  </div>
</div>
</div>

<div class="grade">
<h3>Grade B</h3>
<div class="row">
  <div>
    <label>Jumlah (Kg)</label>
    <input type="number" id="kgB">
  </div>
  <div>
    <label>Harga per Kg</label>
    <input type="text" id="hargaB" oninput="formatInput(this)">
  </div>
</div>
</div>

<div class="grade">
<h3>Grade C</h3>
<div class="row">
  <div>
    <label>Jumlah (Kg)</label>
    <input type="number" id="kgC">
  </div>
  <div>
    <label>Harga per Kg</label>
    <input type="text" id="hargaC" oninput="formatInput(this)">
  </div>
</div>
</div>

<div class="grade alt">
<h3>Total Rupiah (Opsional)</h3>
<label>Total Hasil Panen</label>
<input type="text" id="totalManual" oninput="formatInput(this)">
<div class="small">Digunakan jika data per grade tidak diisi</div>
</div>

<button onclick="hitung()">Hitung Pembagian</button>

<div id="output"></div>
</div>

<script>
const TOTAL_POHON = 700;
const pembagian = { Mamih:200, Papah:200, Bagus:150, Teteh:150 };

function formatRupiah(n){
  return n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".");
}

function formatInput(el){
  let v = el.value.replace(/\D/g,"");
  el.value = v ? formatRupiah(v) : "";
}

function terbilang(n){
const a=["","satu","dua","tiga","empat","lima","enam","tujuh","delapan","sembilan","sepuluh","sebelas"];
if(n<12)return a[n];
if(n<20)return a[n-10]+" belas";
if(n<100)return terbilang(Math.floor(n/10))+" puluh "+a[n%10];
if(n<1000)return terbilang(Math.floor(n/100))+" ratus "+terbilang(n%100);
if(n<1000000)return terbilang(Math.floor(n/1000))+" ribu "+terbilang(n%1000);
return "";
}

function hitung(){
let grades=[
 {n:"A",kg:+kgA.value||0,h:parseInt(hargaA.value.replace(/\./g,""))||0},
 {n:"B",kg:+kgB.value||0,h:parseInt(hargaB.value.replace(/\./g,""))||0},
 {n:"C",kg:+kgC.value||0,h:parseInt(hargaC.value.replace(/\./g,""))||0}
];

let adaGrade = grades.some(g=>g.kg>0 && g.h>0);
let total=0, rincian="";

if(adaGrade){
 grades.forEach(g=>{
   let sub=g.kg*g.h;
   total+=sub;
   if(sub>0){
     rincian+=`Grade ${g.n}: ${g.kg} Kg Ã— Rp ${formatRupiah(g.h)} = <b>Rp ${formatRupiah(sub)}</b><br>`;
   }
 });
}else{
 total=parseInt(totalManual.value.replace(/\./g,""))||0;
 if(total<=0){
   output.innerHTML="<em>Masukkan data grade atau total rupiah.</em>";
   return;
 }
 rincian="<em>Total diinput manual</em><br>";
}

let html=`<div class="summary">${rincian}<br><b>Total: Rp ${formatRupiah(total)}</b></div>`;

for(let p in pembagian){
 let bagian=Math.floor(total*(pembagian[p]/TOTAL_POHON));
 html+=`
 <div class="person">
   <b>${p}</b> (${pembagian[p]} pohon)
   <div class="person-amount">Rp ${formatRupiah(bagian)}</div>
   <div class="small">(${terbilang(bagian)} rupiah)</div>
 </div>`;
}

output.innerHTML=html;
}
</script>
</body>
</html>
