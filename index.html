<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Pembagian Hasil Panen</title>
<style>
body{font-family:Arial;background:#f4f6fb;padding:20px}
.container{max-width:700px;margin:auto;background:#fff;padding:20px;border-radius:10px}
.grade{background:#eef3ff;padding:15px;border-radius:8px;margin-bottom:15px}
label{font-size:14px}
input{width:100%;padding:10px;margin:6px 0 12px;border-radius:5px;border:1px solid #ccc}
button{width:100%;padding:12px;background:#4CAF50;color:#fff;border:none;border-radius:6px;font-size:16px;cursor:pointer}
.summary{background:#fff3cd;padding:12px;border-radius:8px;margin:15px 0}
.person{background:#e9f9ee;padding:14px;border-radius:8px;margin-bottom:10px}
.person-amount{text-align:center;font-size:20px;font-weight:bold}
.small{font-size:12px;color:#555}
</style>
</head>

<body>
<div class="container">
<h2 style="text-align:center">Pembagian Hasil Panen Delis Banana</h2>

<!-- GRADE INPUT -->
<div class="grade">
<h3>Grade A</h3>
<label>Jumlah (Kg)</label>
<input type="number" id="kgA">
<label>Harga per Kg</label>
<input type="text" id="hargaA" oninput="formatInput(this)">
</div>

<div class="grade">
<h3>Grade B</h3>
<label>Jumlah (Kg)</label>
<input type="number" id="kgB">
<label>Harga per Kg</label>
<input type="text" id="hargaB" oninput="formatInput(this)">
</div>

<div class="grade">
<h3>Grade C</h3>
<label>Jumlah (Kg)</label>
<input type="number" id="kgC">
<label>Harga per Kg</label>
<input type="text" id="hargaC" oninput="formatInput(this)">
</div>

<!-- TOTAL MANUAL -->
<div class="grade" style="background:#f0f0f0">
<h3>Alternatif: Total Rupiah Panen</h3>
<label>Total Rupiah</label>
<input type="text" id="totalManual" oninput="formatInput(this)">
<div class="small">
* Digunakan hanya jika data per grade tidak diisi
</div>
</div>

<button onclick="hitung()">Hitung Pembagian</button>

<div id="output"></div>
</div>

<script>
const TOTAL_POHON = 700;
const pembagian = {
  Mamih: 200,
  Papah: 200,
  Bagus: 150,
  Teteh: 150
};

function formatRupiah(n){return n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}
function formatInput(el){
  let v = el.value.replace(/\D/g,"");
  el.value = v ? formatRupiah(v) : "";
}

function terbilang(n){
const a=["","satu","dua","tiga","empat","lima","enam","tujuh","delapan","sembilan","sepuluh","sebelas"];
if(n<12)return a[n];
if(n<20)return a[n-10]+" belas";
if(n<100)return terbilang(Math.floor(n/10))+" puluh "+a[n%10];
if(n<1000)return terbilang(Math.floor(n/100))+" ratus "+terbilang(n%100);
if(n<1000000)return terbilang(Math.floor(n/1000))+" ribu "+terbilang(n%1000);
return "";
}

function hitung(){
let grades=[
 {n:"A",kg:+kgA.value||0,h:parseInt(hargaA.value.replace(/\./g,""))||0},
 {n:"B",kg:+kgB.value||0,h:parseInt(hargaB.value.replace(/\./g,""))||0},
 {n:"C",kg:+kgC.value||0,h:parseInt(hargaC.value.replace(/\./g,""))||0}
];

let adaGrade = grades.some(g=>g.kg>0 && g.h>0);
let total = 0;
let rincian = "";

if(adaGrade){
 grades.forEach(g=>{
   let sub=g.kg*g.h;
   total+=sub;
   if(sub>0){
     rincian+=`Grade ${g.n}: ${g.kg} Kg Ã— Rp ${formatRupiah(g.h)} = <b>Rp ${formatRupiah(sub)}</b><br>`;
   }
 });
}else{
 total=parseInt(totalManual.value.replace(/\./g,""))||0;
 if(total<=0){
   output.innerHTML="<em>Masukkan data grade atau total rupiah.</em>";
   return;
 }
 rincian="<em>Total diinput manual</em><br>";
}

let html=`
<div class="summary">
<b>Rincian Hasil</b><br>
${rincian}<br>
<b>Total Keseluruhan: Rp ${formatRupiah(total)}</b>
</div>
`;

for(let p in pembagian){
 let bagian=Math.floor(total*(pembagian[p]/TOTAL_POHON));
 html+=`
 <div class="person">
   <div><b>${p}</b> (${pembagian[p]} pohon)</div>
   <div class="person-amount">Rp ${formatRupiah(bagian)}</div>
   <div class="small">(${terbilang(bagian)} rupiah)</div>
 </div>
 `;
}

output.innerHTML=html;
}
</script>
</body>
</html>
